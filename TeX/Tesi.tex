%% Definisco la classe del documento: va specificato il formato della carta,
%% le dimensioni del carattere, di cominciare i nuovi capitoli a destra e
%% fronte-retro
\documentclass[a4paper,12pt,openright,twoside,titlepage]{book}

%% Imposto l'italiano
\usepackage[italian,english]{babel}

%% Imposto l'encoding dei caratteri. Specificando utf8 posso mettere
%% direttamente le accentate senza errori
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{fancyhdr}

%% Formato del titolo dei capitoli
\usepackage[Lenny]{fncychap}
\ChNumVar{\fontsize{76}{80}\usefont{OT1}{pzc}{m}{n}\selectfont}
\ChTitleVar{\centering\Large\sffamily\bfseries}

%% Font (sceglierne uno)
\usepackage{mathpazo} % Use the Palatino font by default

%% Imposto l'indentazione per ogni paragrafo
\usepackage{indentfirst}

%% Lettera iniziale del capitolo su più righe
\usepackage{lettrine}

%% Interlinea a 1,5
\usepackage{setspace}
\onehalfspacing % interlinea 1.5
%\singlespacing %interlinea 1
%\doublespacing % interlinea 2

%% Questo per aforismi e citazioni
\usepackage{epigraph}

%% Per inserire gli url all'interno del testo
\usepackage[hidelinks]{hyperref}

%% Per inserire codici sorgenti
\usepackage{listings}
\usepackage{xcolor}
\definecolor{light-gray}{gray}{0.80}
\addto\captionsitalian{\renewcommand{\lstlistingname}{Esempio}}

%% Elenchi puntati e affini
\usepackage{enumitem}

%% Per includere le immagini e gestione lista figure e tabelle:
%% package e path dove andare a richiamarle per nome
\usepackage{graphicx}
\graphicspath{{./figures/}}
%\renewcommand{\listfigurename}{List of plots}
%\renewcommand{\listtablename}{Tables}

%% Questo serve per includere le immagini dove voglio io e non dove
%% pare all'editor!
\usepackage{float}

%% Fa sì che le tabelle possano essere divise tra più pagine
\usepackage{longtable}

%% Bibliografia
\usepackage[sorting=none,style=numeric-comp,backend=bibtex,maxbibnames=99]{biblatex}
\addbibresource{biblio/bibliography.bib} % Database con le citazioni

%% Formattazioni varie
\pagestyle{fancy}\addtolength{\headwidth}{20pt}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter.\ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection \ #1}{}}
\cfoot{}

%%Testatine
%\rhead[\fancyplain{}{\bfseries\leftmark}]{\fancyplain{}{\bfseries\thepage}}
%\lhead[\fancyplain{}{\bfseries\thepage}]{\fancyplain{}{\bfseries\rightmark}}

%Pagine pari
\fancyhead[RE]{\bfseries\rightmark}
\fancyhead[LE]{\bfseries\thepage}
\fancyhead[CE]{}
%\fancyfoot[LE]{\bfseries\thepage}
%\fancyfoot[CE]{}
%\fancyfoot[LE]{\textit{thesistitle}}

%Pagine dispari
\fancyhead[LO]{\bfseries\leftmark}
\fancyhead[RO]{\bfseries\thepage}
\fancyhead[CO]{}
%\fancyfoot[LO]{\bfseries\leftmark}
%\fancyfoot[CO]{}
%\fancyfoot[RO]{\textit{thesistitle}}
%\renewcommand{\footrulewidth}{0.4pt}

\fancypagestyle{plain}{%
	\fancyhf{}
	\fancyfoot[RO]{}
	\fancyfoot[LO]{}
	\fancyfoot[CO]{\bfseries\thepage}
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}}

%% Includo subsubsection nella numerazione della TOC
\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

%%
%% Titolo della tesi, relatori et similia
%%
\newcommand{\thesistitle}{Deconstructing the Unknown: A Black Box Approach to Reverse Engineering ICS using Graphs and Invariants }
\newcommand{\supervisor}{Prof. \textbf{Massimo \textsc{Merro}}}
\newcommand{\firstcosupervisor}{Prof. \textbf{Ruggero \textsc{Lanotte}}}
\newcommand{\secondcosupervisor}{\textbf{Marco \textsc{Lucchese}}}
\newcommand{\opponent}{Prof. \textbf{Severus \textsc{Piton}}}
\newcommand{\candidate}{\textbf{Marco \textsc{Oliani}}\\ Matr. VR457249}
\newcommand{\academicyear}{\large Academic Year 2022/2023}

%% Abstract
\newcommand{\fncyblank}{\fancyhf{}}
\newenvironment{abstract}%
{\cleardoublepage\fncyblank\null\vfill\begin{center}%
	\bfseries\Large\abstractname\end{center}}%
{\vfill\null}

%######
%% Inizio documento
%######
\begin{document}

%###### Frontespizio ######%
\begin{titlepage}
	\begin{center}
		\thispagestyle{empty}
		
		% logo
		%\includegraphics[width=0.15\textwidth]{logo_univr.png}~\\[0.5cm]
		
		% Upper part of the page. The '~' is needed because \\
		% only works if a paragraph has started.
		
		\textsc{\LARGE Università degli Studi di Verona}\\
		\textsc{Department of COMPUTER SCIENCE}\\[1.0cm]
		\textsc{\large Master's Degree in \\ 
			COMPUTER SCIENCE AND ENGINEERING}\\[1.5cm]
		
		\large Master Thesis \\[0.5cm]
		% Title
		
		\hrulefill
		
		%{ \Large\bfseries [PROVVISORIO] \\
		%	BLACKBOX APPROACH TO \\ 
		%	CPS REVERSE ENGINEERING \\ }

		{ \Large\bfseries\MakeUppercase{\thesistitle}}
		
		\hrulefill \\[2.0cm]
		
		% Author and supervisor
		\begin{minipage}[t]{0.45\textwidth}
			\begin{flushleft} \large
				\emph{Supervisor:}\\
				\supervisor 
			\end{flushleft}
			\begin{flushleft} \large
				\emph{Co-supervisors:}\\
				\firstcosupervisor \\
				\secondcosupervisor
			\end{flushleft}
		\end{minipage}
		\begin{minipage}[t]{0.45\textwidth}\raggedleft
			\begin{flushright} \large
				\emph{Candidate:} \\
				\candidate
			\end{flushright}
		\end{minipage}
		
		\vfill
		
		% Bottom of the page -> è la data
		\academicyear
		
	\end{center}
\end{titlepage}

\thispagestyle{empty}

%###### Aforisma ######%
\begin{titlepage}
	\thispagestyle{empty}
	\begin{flushright}
		\vspace*{40 mm}
		\small{\emph{``Gallina vecchia fa buon brodo''}\\(Valentino Rossi)}
	\end{flushright}	
	\vfill
\end{titlepage}
\thispagestyle{empty}

%###### ABSTRACT ######%
\begin{titlepage}
	\begin{abstract}
		Bla bla bla
	\end{abstract}
	\vfill
\end{titlepage}
\thispagestyle{empty}

%% Faccio partire la numerazione normale DOPO l'indice: lo stesso indice 
%% verrà numerato in numeri romani
\frontmatter
\tableofcontents
\mainmatter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%       Inizio TESI             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%###### CAPITOLO 1 ######%
\include{Chapters/intro}

%###### CAPITOLO 2 ######%
\include{Chapters/background}

%###### CAPITOLO 3 ######%
\include{Chapters/relatedwork}

%###### CAPITOLO 4 ######%
\include{Chapters/stateofart}

%###### CAPITOLO 5 ######%
\include{Chapters/proposal}

%###### CAPITOLO 6 ######%
\include{Chapters/casestudy}

%###### CAPITOLO 7 ######%
\include{Chapters/application}

%###### CAPITOLO 8 ######%
\include{Chapters/conclusions}

%##### LISTA FIGURE #####%
\cleardoublepage
\addcontentsline{toc}{chapter}{\listfigurename}
\listoffigures

%##### LISTA TABELLE #####%
\cleardoublepage
\addcontentsline{toc}{chapter}{\listtablename}
\listoftables

%###### BIBLIOGRAFIA ######%
\printbibliography[heading=bibintoc, title=References]

%% Vecchia versione
%\begin{thebibliography}{99}
%	\addcontentsline{toc}{chapter}{Bibliografia}	
%\end{thebibliography}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%		Fine TESI				%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}