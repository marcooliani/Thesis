%% Definisco la classe del documento: va specificato il formato della carta,
%% le dimensioni del carattere, di cominciare i nuovi capitoli a destra e
%% fronte-retro
\documentclass[a4paper,12pt,openright,twoside,titlepage]{book}

%% Imposto l'inglese
\usepackage[italian,english]{babel}

%% Imposto l'encoding dei caratteri. Specificando utf8 posso mettere
%% direttamente le accentate senza errori
\usepackage[utf8]{inputenc}
\usepackage{pmboxdraw}

%% Per generare una cosa tipo output del comando tree
\usepackage[T1]{fontenc}
\usepackage{inconsolata} % Font monospace (al posto di Courier)

%% Uso il template di frontespizio di Gregorio
%\usepackage{frontespizio}

\usepackage{fancyhdr}

%% Formato del titolo dei capitoli
\usepackage[Lenny]{fncychap}
\ChNumVar{\fontsize{76}{80}\usefont{OT1}{pzc}{m}{n}\selectfont}
\ChTitleVar{\centering\Large\sffamily\bfseries}

%% Font (sceglierne uno)
\usepackage{mathpazo} % Use the Palatino font by default

%% Imposto l'indentazione per ogni paragrafo
\usepackage{indentfirst}

%% Lettera iniziale del capitolo su più righe
\usepackage{lettrine}

%% Per abilitare il simbolo del trademark
\usepackage{textcomp}

%% Interlinea a 1,5
\usepackage{setspace}
\onehalfspacing % interlinea 1.5
%\singlespacing %interlinea 1
%\doublespacing % interlinea 2

%% Questo per aforismi e citazioni
\usepackage{epigraph}

%% Per inserire gli url all'interno del testo
\usepackage[hidelinks]{hyperref}
%\hypersetup{
%	colorlinks=true,
%	linkcolor=blue,
%	filecolor=magenta,      
%%	citecolor=blue
%}
%
% \urlstyle{same}

%% Per inserire codici sorgenti
\usepackage{listings}
\usepackage{verbatim}
\usepackage{xcolor}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{backcolourtext}{rgb}{0.85,0.85,0.82}
\lstset{ 
	literate=
	{└}{\textSFii}{1}%
	{┐}{\textSFiii}{1}%
	{├}{\textSFviii}{1}%
	{─}{\textSFx}{1}%
	{│}{\textSFxi}{1},
	postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
	language=Python,
	backgroundcolor=\color{backcolour},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
	basicstyle=\footnotesize\ttfamily,        % the size of the fonts that are used for the code
	breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
	breaklines=true,                 % sets automatic line breaking
	captionpos=b,                    % sets the caption-position to bottom
	commentstyle=\color{mygray},    % comment style
	escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
	extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
	deletekeywords={path},
	morekeywords={def},
	frame=none,	                   % adds a frame around the code
	keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
	keywordstyle=\color{blue},       % keyword style
	numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
	numbersep=5pt,                   % how far the line-numbers are from the code
	numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
	rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
	showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
	showstringspaces=false,          % underline spaces within strings only
	showtabs=false,                  % show tabs within strings adding particular underscores
	stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
	%stringstyle=\color{mygreen},     % string literal style
	tabsize=2,	                   % sets default tabsize to 2 spaces
	aboveskip=2.5mm,
	belowskip=2.5mm,
	xleftmargin=5mm,
	xrightmargin=5mm
}

%% Box colorati per teoremi, congetture, regole e altro.
%% Per aggiungere il bordo, usare l'opzione "frame" allo stesso
%% modo di "center", standalone
\usepackage{tcolorbox}
\usepackage{adjustbox}
\usepackage{varwidth}
\newenvironment{rulebox}{%
	\noindent
	\adjustbox{innerenv={varwidth}[l]{0.9\linewidth},margin=\fboxsep+.25cm \fboxsep+.2cm,bgcolor=backcolour,center}\bgroup
}{%
\egroup
}

%% Elenchi puntati e affini
\usepackage{enumitem}

%% Per includere le immagini e gestione lista figure e tabelle:
%% package e path dove andare a richiamarle per nome
\usepackage{graphicx}
\graphicspath{{./figures/}}
% Subfigures
\usepackage[labelfont=bf]{caption}
\usepackage{subcaption}
\captionsetup[lstlisting]{font={small,it}}
\captionsetup[figure]{font={small,it}}
\captionsetup[subfigure]{font={smaller,it}}
\captionsetup[table]{font={smaller,it}}
%\renewcommand{\listfigurename}{List of plots}
%\renewcommand{\listtablename}{Tables}

%% Questo serve per includere le immagini dove voglio io e non dove
%% pare all'editor!
\usepackage{float}

%% Fa sì che le tabelle possano essere divise tra più pagine
\usepackage{longtable}

%% Numeri di riga nelle pagine -> SOLO PER LE CORREZIONI!!
\usepackage{lineno}

%% Bibliografia
\usepackage[sorting=none,style=numeric-comp,backend=bibtex,maxbibnames=999,urldate=iso,date=iso]{biblatex}
\usepackage{csquotes}
\addbibresource{biblio/bibliography.bib} % Database con le citazioni

%% Formattazioni varie
\newcommand{\fncyblank}{\fancyhf{}}

\pagestyle{fancy}\addtolength{\headwidth}{20pt}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter.\ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection \ #1}{}}
\cfoot{}

%%Testatine
%\rhead[\fancyplain{}{\bfseries\leftmark}]{\fancyplain{}{\bfseries\thepage}}
%\lhead[\fancyplain{}{\bfseries\thepage}]{\fancyplain{}{\bfseries\rightmark}}

%Pagine pari
\fancyhead[RE]{\bfseries\rightmark}
\fancyhead[LE]{\bfseries\thepage}
\fancyhead[CE]{}
%\fancyfoot[LE]{\bfseries\thepage}
%\fancyfoot[CE]{}
%\fancyfoot[LE]{\textit{thesistitle}}

%Pagine dispari
\fancyhead[LO]{\bfseries\leftmark}
\fancyhead[RO]{\bfseries\thepage}
\fancyhead[CO]{}
%\fancyfoot[LO]{\bfseries\leftmark}
%\fancyfoot[CO]{}
%\fancyfoot[RO]{\textit{thesistitle}}
%\renewcommand{\footrulewidth}{0.4pt}

\fancypagestyle{plain}{%
	\fancyhf{}
	\fancyfoot[RO]{}
	\fancyfoot[LO]{}
	\fancyfoot[CO]{\bfseries\thepage}
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}}

%% Includo subsubsection nella numerazione della TOC
\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

%###### Inizio documento ######%
\begin{document}

%###### Frontespizio ######%
\include{frontespizio}

%###### Aforisma ######%
\include{aforisma}

%###### ABSTRACT ######%
\include{abstract}

%###### ACKNOWLEDGEMENTS #####%
%\include{acknowledgements}

%% Faccio partire la numerazione normale DOPO l'indice: lo stesso indice 
%% verrà numerato in numeri romani
\frontmatter
\tableofcontents
\mainmatter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%       Inizio TESI             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%###### CAPITOLO 1 ######%
\include{Chapters/intro}

%###### CAPITOLO 2 ######%
\include{Chapters/background}

%###### CAPITOLO 3 ######%
\include{Chapters/stateofart}

%###### CAPITOLO 4 ######%
\include{Chapters/proposal}

%###### CAPITOLO 5 ######%
\include{Chapters/casestudy}

%###### CAPITOLO 6 ######%
\include{Chapters/application}

%###### CAPITOLO 7 ######%
\include{Chapters/conclusions}

%##### LISTA FIGURE #####%
\cleardoublepage
\addcontentsline{toc}{chapter}{\listfigurename}
\listoffigures

%##### LISTA TABELLE #####%
\cleardoublepage
\addcontentsline{toc}{chapter}{\listtablename}
\listoftables

%##### LISTA LISTATI #####%
\cleardoublepage
\addcontentsline{toc}{chapter}{Listings}
\lstlistoflistings

%###### BIBLIOGRAFIA ######%
\printbibliography[heading=bibintoc, title=References]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%		Fine TESI				%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}